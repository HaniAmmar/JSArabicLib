<!DOCTYPE html>
<html lang="ar" dir="rtl" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <title>أدوات للغة العربية</title>
</head>

<body>
    <div id="main">
        <div>
            <fieldset class="options">
                <legend>الخيارات:</legend>
                <input type="radio" id="RemoveAllTashkil" name="options" value="1" checked="checked" />
                <label for="RemoveAllTashkil">إزالة كامل التشكيل.</label><br />
                <input type="radio" id="RemoveTashkilKeepShadda" name="options" value="2" />
                <label for="RemoveTashkilKeepShadda">إزالة التشكيل عدا الشدة.</label><br />
                <input type="radio" id="RemoveLastTashkil" name="options" value="3" />
                <label for="RemoveLastTashkil">إزالة تشكيل آخر حرف.</label><br />
                <input type="radio" id="KeepLastTashkilOnly" name="options" value="4" />
                <label for="KeepLastTashkilOnly">ابقاء تشكيل الحرف الآخير.</label><br />
                <input type="radio" id="ReduceTashkil" name="options" value="5" />
                <label for="ReduceTashkil">تخفيف التشكيل.</label><br />
                <input type="radio" id="RemoveTatweel" name="options" value="6" />
                <label for="RemoveTatweel">إزالة التطويل.</label><br />
                <input type="radio" id="ImproveText" name="options" value="7" />
                <label for="ImproveText">تحسين النص.</label><br />
            </fieldset>
        </div>
        <div>
            <fieldset>
                <legend>النص:</legend>
                <textarea rows="5"
                    id="input_text">ذَهَـــبَ           زَيْــــدُ إِلَى اَلـسُّوقِ فَلَمْ يَعْثُرْ عَلَى مَا كَانَ يُرِيدُ , وَكَانَ الْـجَوُّ حِينَهَا جَمِيلًا , وَالـسَّمَاءُ صَافِيَةً، والْهَوَاءُ نَقِيًا  ; فَذَهَبَ إِلَى اَلْبَحْرِ، وَجَلَسَ يَسْتَمْتِعُ بِالْغُرُوبِ عند مكان اسمه  : " الجرف " .</textarea>
                <button type="button" id="execute">تنفيذ</button>
            </fieldset>
        </div>
        <div>
            <fieldset>
                <legend>الناتج:</legend>
                <textarea id="result_text" rows="5"></textarea>
                <!-- <button type="button" onclick="">نسخ</button> -->
            </fieldset>
        </div>
    </div>

    <script>
        "use strict";
        window.onload = function () {
            let selectedOP = 0;

            const ops = document.getElementsByName("options");
            for (let i = 0; i < ops.length; i++) {
                const r = ops[i];

                r.addEventListener("change", function () {
                    selectedOP = parseInt(this.value, 10);
                });

                if (r.checked) {
                    selectedOP = parseInt(r.value, 10);
                }
            }

            const jsElement = document.createElement("script");
            jsElement.src = "js/arlib.js";
            jsElement.onload = function () {
                const inputText = document.getElementById("input_text");
                const resultText = document.getElementById("result_text");

                document.getElementById("execute").addEventListener("click", function () {
                    resultText.value = (function () {
                        switch (selectedOP) {
                            case 1:
                            case 2:
                                return ArLib.RemoveTashkil(inputText.value, (selectedOP === 2));
                            case 3:
                            case 4:
                                return ArLib.LastTashkil(inputText.value, (selectedOP === 3));
                            case 5:
                                return ArLib.ReduceTashkil(inputText.value);
                            case 6:
                                return ArLib.RemoveTatweel(inputText.value);
                            case 7:
                                return ArLib.ImproveText(inputText.value);
                            default:
                                return "";
                        }
                    })();
                });
            };

            document.body.appendChild(jsElement);
        };
    </script>
</body>

</html>
